<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3-Day Workout Tracker</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <style>
    .video {
      aspect-ratio: 16 / 9;
      width: 100%;
      margin-bottom: 1rem;
    }
    .section {
      margin-bottom: 2rem;
    }
    .completed {
      color: green;
      font-weight: bold;
    }
    iframe {
      border-radius: 8px;
      margin: 0.5rem 0;
    }
  </style>
</head>
<body>
  <main class="container">
    <h1>ðŸ’ª 3-Day Workout Tracker</h1>
    <label for="workoutDate">Workout Date</label>
    <input type="date" id="workoutDate">

    <details id="day1" open>
      <summary><strong>Day 1: Push (Chest, Shoulders, Triceps)</strong></summary>
      <div class="section">
        <!-- Warm-up, main workout, cool-down omitted here for brevity (still included in live code) -->
      </div>
    </details>

    <details id="day2">
      <summary><strong>Day 2: Pull (Back, Biceps)</strong></summary>
      <div class="section">
        <!-- Content as before -->
      </div>
    </details>

    <details id="day3">
      <summary><strong>Day 3: Legs + Core + MetCon</strong></summary>
      <div class="section">
        <!-- Content as before -->
      </div>
    </details>

    <button onclick="saveProgress()">âœ… Mark Today as Completed</button>
    <p id="status"></p>
    <button onclick="resetProgress()" style="margin-top: 1rem;">ðŸ§¹ Reset All Progress</button>
  </main>

  <script>
    function saveProgress() {
      const date = document.getElementById('workoutDate').value;
      if (!date) {
        alert('Please select a workout date.');
        return;
      }
      const checkboxes = Array.from(document.querySelectorAll('input[type="checkbox"]'));
      const progress = checkboxes.map(cb => cb.checked);
      localStorage.setItem('lastWorkoutDate', date);
      localStorage.setItem(`progress-${date}`, JSON.stringify(progress));
      document.getElementById('status').innerText = `âœ… Workout completed on ${date}`;

      autoAdvanceWorkout();
    }

    function resetProgress() {
      const date = document.getElementById('workoutDate').value;
      if (date) localStorage.removeItem(`progress-${date}`);
      document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
      document.getElementById('status').innerText = '';
    }

    function autoAdvanceWorkout() {
      const allDays = ['day1', 'day2', 'day3'];
      for (let i = 0; i < allDays.length; i++) {
        const el = document.getElementById(allDays[i]);
        if (el.open) {
          el.open = false;
          const next = document.getElementById(allDays[i + 1]);
          if (next) next.open = true;
          break;
        }
      }
    }

    window.onload = function () {
      const savedDate = localStorage.getItem('lastWorkoutDate');
      if (savedDate) {
        document.getElementById('workoutDate').value = savedDate;
        const savedProgress = JSON.parse(localStorage.getItem(`progress-${savedDate}`));
        const checkboxes = Array.from(document.querySelectorAll('input[type="checkbox"]'));
        if (savedProgress && checkboxes.length === savedProgress.length) {
          checkboxes.forEach((cb, i) => cb.checked = savedProgress[i]);
        }
        document.getElementById('status').innerText = `âœ… Last workout recorded on ${savedDate}`;
      }
    }
  </script>
</body>
</html>
